{% extends "business_app/menu.html" %}
{% block title %}{{title|title}} detail page{% endblock %}
{% load classname from business_app_extras %}
{% load filterlists from business_app_extras %}
{% load filternormal from business_app_extras %}
{% load filterurl from business_app_extras %}
{% load is_entity from business_app_extras %}

{% block content %}
<div class="jumbotron">
	<h2>{{title|title}} detail</h2>
	<div class="bs-callout bs-callout-default">
		<ul class="list-group">
			{% for name, value in mapa|filternormal %}
				<li class="list-group-item"> <b>{{name|title}}:</b>
					{% if value|is_entity %}
						<a href="{{value|filterurl}}">{{value}}</a>
					{% else %}
						{{value}}
					{% endif%}
				</li>
			{% endfor %}
		</ul>
	</div>
</div>
	
<ul class="nav nav-tabs" role="tablist">
	{% for name, value in mapa|filterlists %}
		{% if forloop.first %}
			<li class="active"><a href="#pane{{forloop.counter}}" data-toggle="tab"><span class="glyphicon glyphicon-tasks"></span> {{name|title}}</a></li>
		{% else %}
			<li><a href="#pane{{forloop.counter}}" data-toggle="tab"><span class="glyphicon glyphicon-tasks"></span> {{name|title}}</a></li>
		{% endif %}
	{% endfor %}   
</ul>
	
<div class="tab-content">
	{% for name, value in mapa|filterlists %}
		{% if forloop.first %}
			<div id="pane{{forloop.counter}}" class="tab-pane active">
				<div class="bs-callout bs-callout-default">
					<ul class="list-group">
						{% for val in value %}
							<li class="list-group-item"><a href="{{val|filterurl}}">{{val}}</a></li>
						{% endfor %}
					</ul>
				</div>
			</div>
		{% else %}
			<div id="pane{{forloop.counter}}" class="tab-pane">
				<div class="bs-callout bs-callout-default">
					<ul class="list-group">
						{% for val in value %}
							<li class="list-group-item"><a href="{{val|filterurl}}">{{val}}</a></li>
						{% endfor %}
					</ul>
				</div>
			</div>
		{% endif %}
	{% endfor %}
</div>
{% endblock %}

{% block sidebar_content %}
	<li>
		<b>
			<a href="{% url update_url object.pk %}">
				<span class="glyphicon glyphicon-pencil"></span>
				Update {{ title|title }}
			</a>
		</b>
	</li>
		<li>
		<b>
			<a href="{% url delete_url object.id %}" >
				<span class="glyphicon glyphicon-remove"></span>
				Delete {{ title|title }}
			</a>
		</b>
	</li>
	<li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">
		<span class="glyphicon glyphicon-link"></span>
		<b>Connected tables</b>
		<span class="caret"></span></a>
		<ul class="dropdown-menu">
			{% if linked_forms|length > 0%}
				{% for k,v in linked_forms.items %}
					<li><a href="/list{{v}}">{{v}}</a></li>
				{% endfor %}
			{% else %}
				<li><a href="#">No connected tables</a></li>
			{% endif %}
		</ul>
    </li>	
	{% for custom_method in custom_methods %}
	<li>
		<b>
			<a href="{% url custom_method.url object.pk %}">
				<span class="glyphicon glyphicon-list-alt"></span>
					{{custom_method.name}}
			</a>
		</b>
	</li>
	{% endfor %}
{% endblock %}